<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Control de Tiempo - Consolas</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #1a1a1a; color: white; }
    h1 { color: #00eaff; }
    label, input, select, button { margin: 5px; font-size: 1rem; }
    .timer { margin: 10px 0; padding: 10px; background: #333; border-radius: 8px; }
    .finalizado { background: #ff5050; }
  </style>
</head>
<body>

<h1>üéÆ Control de Tiempo - Consolas</h1>

<form id="formulario">
  <label>Cliente:</label>
  <input type="text" id="cliente" required>
  <label>Consola:</label>
  <select id="consola">
    <option>PS5</option>
    <option>Xbox</option>
    <option>Switch</option>
    <option>PC Gamer</option>
  </select>
  <label>Tiempo (min):</label>
  <input type="number" id="minutos" min="1" required>
  <button type="submit">Iniciar</button>
</form>

<div id="timers"></div>

<script>
  const formulario = document.getElementById('formulario');
  const contenedor = document.getElementById('timers');

  let temporizadoresActivos = 0;
  const LIMITE_TEMPORIZADORES = 5;

  formulario.addEventListener('submit', (e) => {
    e.preventDefault();

    if (temporizadoresActivos >= LIMITE_TEMPORIZADORES) {
      alert("‚ö†Ô∏è Solo puedes tener 5 consolas activas al mismo tiempo.");
      return;
    }

    const nombre = document.getElementById('cliente').value.trim();
    const consola = document.getElementById('consola').value;
    const minutos = parseInt(document.getElementById('minutos').value);

    if (!nombre || isNaN(minutos) || minutos <= 0) {
      alert("Completa todos los campos correctamente.");
      return;
    }

    crearTemporizador(nombre, consola, minutos);
    formulario.reset();
  });

  function crearTemporizador(nombre, consola, minutos) {
    const tiempoFinal = Date.now() + minutos * 60 * 1000;
    const timerDiv = document.createElement('div');
    timerDiv.className = 'timer';

    const intervalo = setInterval(() => {
      const restante = tiempoFinal - Date.now();
      if (restante <= 0) {
        clearInterval(intervalo);
        timerDiv.classList.add('finalizado');
        timerDiv.innerHTML = `<strong>${nombre} (${consola})</strong>: ¬°Tiempo terminado! 
        <button onclick="eliminarTemporizador(this, true)">Eliminar</button>`;
        new Audio('https://www.soundjay.com/button/sounds/beep-07.mp3').play();
      } else {
        const mins = Math.floor(restante / 60000);
        const segs = Math.floor((restante % 60000) / 1000);
        timerDiv.innerHTML = `<strong>${nombre} (${consola})</strong>: ${mins}m ${segs}s 
        <button onclick="eliminarTemporizador(this)">Eliminar</button>`;
      }
    }, 1000);

    timerDiv.dataset.intervalo = intervalo;
    contenedor.appendChild(timerDiv);
    temporizadoresActivos++;
  }

  function eliminarTemporizador(btn, finalizado = false) {
    const div = btn.parentElement;
    clearInterval(div.dataset.intervalo);
    div.remove();
    if (!finalizado) temporizadoresActivos--;
  }
</script>

</body>
</html>

