<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Control de Tiempo - Consolas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #1c1c1c;
      color: #f1f1f1;
      text-align: center;
      padding: 2rem;
    }
    h1 {
      color: #00ffcc;
    }
    input, button {
      padding: 0.5rem;
      margin: 0.3rem;
      font-size: 1rem;
    }
    #clientes {
      margin-top: 2rem;
    }
    .cliente {
      background: #2b2b2b;
      border: 1px solid #444;
      padding: 1rem;
      margin: 0.5rem auto;
      max-width: 400px;
      border-radius: 8px;
    }
    .paused {
      background-color: #555;
    }
  </style>
</head>
<body>
  <h1>ðŸŽ® Control de Consolas</h1>

  <label for="consola">ID Consola:</label>
  <input type="text" id="consola" placeholder="Ej. Consola 1"/>

  <label for="tiempo">Minutos:</label>
  <input type="number" id="tiempo" placeholder="Ej. 30" />

  <button onclick="agregarCliente()">Iniciar</button>

  <div id="clientes"></div>

  <script>
    let maxClientes = 5;
    let clientes = [];

    function agregarCliente() {
      if (clientes.length >= maxClientes) {
        alert("LÃ­mite de 5 consolas activas alcanzado.");
        return;
      }

      let consola = document.getElementById("consola").value.trim();
      let tiempo = parseInt(document.getElementById("tiempo").value);

      if (!consola || isNaN(tiempo) || tiempo <= 0) {
        alert("Introduce una consola vÃ¡lida y un tiempo en minutos.");
        return;
      }

      const id = Date.now();
      const cliente = {
        id,
        consola,
        tiempo: tiempo * 60,
        intervalo: null,
        pausado: false
      };

      clientes.push(cliente);
      mostrarClientes();
      iniciarTemporizador(cliente);
      document.getElementById("consola").value = "";
      document.getElementById("tiempo").value = "";
    }

    function mostrarClientes() {
      const contenedor = document.getElementById("clientes");
      contenedor.innerHTML = "";

      clientes.forEach((c) => {
        const div = document.createElement("div");
        div.className = "cliente" + (c.pausado ? " paused" : "");
        div.innerHTML = `
          <h3>${c.consola}</h3>
          <p><strong>Tiempo:</strong> <span id="tiempo-${c.id}">${formatoTiempo(c.tiempo)}</span></p>
          <button onclick="pausarReanudar(${c.id})">${c.pausado ? "Reanudar" : "Pausar"}</button>
          <button onclick="agregarMinuto(${c.id})">+1 Min</button>
          <button onclick="eliminarCliente(${c.id})">Eliminar</button>
        `;
        contenedor.appendChild(div);
      });
    }

    function iniciarTemporizador(cliente) {
      cliente.intervalo = setInterval(() => {
        if (!cliente.pausado) {
          cliente.tiempo--;
          if (cliente.tiempo <= 0) {
            clearInterval(cliente.intervalo);
            alert(`Â¡Tiempo terminado para ${cliente.consola}!`);
            eliminarCliente(cliente.id);
            return;
          }
          document.getElementById(`tiempo-${cliente.id}`).textContent = formatoTiempo(cliente.tiempo);
        }
      }, 1000);
    }

    function pausarReanudar(id) {
      const cliente = clientes.find(c => c.id === id);
      if (cliente) {
        cliente.pausado = !cliente.pausado;
        mostrarClientes();
      }
    }

    function agregarMinuto(id) {
      const cliente = clientes.find(c => c.id === id);
      if (cliente) {
        cliente.tiempo += 60;
        mostrarClientes();
      }
    }

    function eliminarCliente(id) {
      const cliente = clientes.find(c => c.id === id);
      if (cliente) {
        clearInterval(cliente.intervalo);
        clientes = clientes.filter(c => c.id !== id);
        mostrarClientes();
      }
    }

    function formatoTiempo(segundos) {
      const m = Math.floor(segundos / 60).toString().padStart(2, '0');
      const s = (segundos % 60).toString().padStart(2, '0');
      return `${m}:${s}`;
    }
  </script>
</body>
</html>
